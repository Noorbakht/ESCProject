{"remainingRequest":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\src\\views\\Call.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\src\\views\\Call.vue","mtime":1587095407281},{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1583300630102},{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1586614642653},{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1586614653886},{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1583300630102},{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1586614650706}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmFpbmJvd1NESyBmcm9tICJyYWluYm93LXdlYi1zZGsiOw0KLy8gaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJDYWxsIiwNCiAgICBjb21wb25lbnRzOiB7fSwNCiAgICBkYXRhOiAoKSA9PiAoew0KICAgICAgICBzdGFydDogZmFsc2UsDQogICAgICAgIGlzQ29ubmVjdGluZzogZmFsc2UsDQogICAgICAgIGNhbmNlbGxlZDogZmFsc2UsDQogICAgICAgIGNhbGw6ICIiLA0KICAgICAgICBleGl0OiBmYWxzZQ0KICAgIH0pLA0KICAgIG1vdW50ZWQoKSB7DQogICAgICAgIGxldCBzZWxmID0gdGhpczsNCiAgICAgICAgc2VsZi5jaGVja0NhbGwoKTsNCiAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmFnZW50SWQgIT0gIiIpIHsNCiAgICAgICAgICAgIHNlbGYuaXNDb25uZWN0aW5nID0gdHJ1ZTsNCiAgICAgICAgICAgIHNlbGYuc3RhcnRDYWxsKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiYWdlbnQgaWQgZW1wdHkiKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBjaGVja0NhbGw6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgaWYgKHJhaW5ib3dTREsud2ViUlRDLmNhbk1ha2VBdWRpb1ZpZGVvQ2FsbCgpKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkJyb3dzZXIgc3VwcG9ydHMgY2FsbHMiKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBjYWxscyIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHJhaW5ib3dTREsud2ViUlRDLmhhc0FDYW1lcmEoKSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJCcm93c2VyIHN1cHBvcnRzIHZpZGVvIik7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdmlkZW8iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChyYWluYm93U0RLLndlYlJUQy5oYXNBTWljcm9waG9uZSgpKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkJyb3dzZXIgc3VwcG9ydHMgbWljcm9waG9uZSIpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IG1pY3JvcGhvbmUiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgLy9hdXRob3Jpc2UgdGhlIGFwcGxpY2F0aW9uIHRvIGFjY2VzcyBtZWRpYSBkZXZpY2UNCiAgICAgICAgICAgICAgICAuZ2V0VXNlck1lZGlhKHsgYXVkaW86IHRydWUsIHZpZGVvOiBmYWxzZSB9KQ0KICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgew0KICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2suc3RvcCgpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcw0KICAgICAgICAgICAgICAgICAgICAgICAgLmVudW1lcmF0ZURldmljZXMoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGV2aWNlcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldmljZXMuZm9yRWFjaChmdW5jdGlvbihkZXZpY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGV2aWNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRldmljZS5kZXZpY2VJZCA9PT0gImRlZmF1bHQiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkZXZpY2UpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGV2aWNlLmxhYmVsLCAiaXMgYXZhaWxhYmxlIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWluYm93U0RLLndlYlJUQy51c2VNaWNyb3Bob25lKCJkZWZhdWx0Iik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWluYm93U0RLLndlYlJUQy51c2VTcGVha2VyKCJkZWZhdWx0Iik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIHN0YXJ0Q2FsbDogYXN5bmMgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLmFnZW50SWQpOw0KICAgICAgICAgICAgICAgIGxldCBjb250YWN0ID0gYXdhaXQgcmFpbmJvd1NESy5jb250YWN0cy5zZWFyY2hCeUlkKA0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5hZ2VudElkDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb250YWN0KTsNCiAgICAgICAgICAgICAgICBsZXQgcmVzID0gcmFpbmJvd1NESy53ZWJSVEMuY2FsbEluQXVkaW8oY29udGFjdCk7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5sYWJlbCA9PT0gIk9LIikgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiY2FsbGluZyIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKA0KICAgICAgICAgICAgICAgICAgICByYWluYm93U0RLLndlYlJUQy5SQUlOQk9XX09OV0VCUlRDRVJST1JIQU5ETEVELA0KICAgICAgICAgICAgICAgICAgICBzZWxmLm9uV2ViUlRDRXJyb3JIYW5kbGVkDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKA0KICAgICAgICAgICAgICAgICAgICByYWluYm93U0RLLndlYlJUQy5SQUlOQk9XX09OV0VCUlRDQ0FMTFNUQVRFQ0hBTkdFRCwNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbldlYlJUQ0NhbGxDaGFuZ2VkDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICBzZWxmLnN0YXJ0ID0gdHJ1ZTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIG9uV2ViUlRDQ2FsbENoYW5nZWQ6IGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7DQogICAgICAgICAgICBzZWxmLmNhbGwgPSBldmVudC5kZXRhaWw7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiT25XZWJSVENDYWxsQ2hhbmdlZCBldmVudCIsIGV2ZW50LmRldGFpbC5zdGF0dXMpOw0KICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi5jYWxsLnN0YXR1cy52YWx1ZSk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIG9uV2ViUlRDRXJyb3JIYW5kbGVkOiBmdW5jdGlvbihldmVudCkgew0KICAgICAgICBsZXQgZXJyb3JTREsgPSBldmVudC5kZXRhaWw7DQogICAgICAgIGNvbnNvbGUubG9nKCJXZWJSVEMgRVJST1I6ICIsIGVycm9yU0RLKTsNCiAgICB9DQogICAgLy8gZW5kQ2FsbDogYXN5bmMgZnVuY3Rpb24oKSB7DQogICAgLy8gICBsZXQgc2VsZiA9IHRoaXM7DQogICAgLy8gICBzZWxmLmV4aXQgPSB0cnVlOw0KICAgIC8vICAgYXdhaXQgcmFpbmJvd1NESy53ZWJSVEMucmVsZWFzZShzZWxmLmNhbGwpOw0KICAgIC8vICAgY29uc29sZS5sb2coIlNlc3Npb24gRW5kZWQiKTsNCiAgICAvLyB9LA0KICAgIC8vIG1vdmVUb0NoYXQ6IGFzeW5jIGZ1bmN0aW9uKCkgew0KICAgIC8vICAgY29uc29sZS5sb2coIm1vdmluZyB0byBjaGF0Iik7DQogICAgLy8gICBhd2FpdCByYWluYm93U0RLLndlYlJUQy5yZWxlYXNlKHRoaXMuY2FsbCk7DQogICAgLy8gICBhd2FpdCB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJjaGF0Ym90IiB9KTsNCiAgICAvLyB9DQp9Ow0K"},{"version":3,"sources":["Call.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Call.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"call\" id=\"call\">\r\n        <transition name=\"fade\">\r\n            <Waitpage v-bind:isConnecting=\"isConnecting\" v-if=\"!start\" />\r\n        </transition>\r\n        <audio id=\"globalAudioTag\" autoplay></audio>\r\n        <video id=\"largevideo\" autoplay></video>\r\n        <video id=\"globalVideoTag\" autoplay style=\"display:none;\"></video>\r\n        <v-footer width=\"100%\" padless>\r\n            <v-btn\r\n                id=\"endcall\"\r\n                @click=\"endCall\"\r\n                height=\"58px\"\r\n                width=\"100%\"\r\n                x-large\r\n                depressed\r\n                tile\r\n            >\r\n                <h3>End Call</h3>\r\n            </v-btn>\r\n        </v-footer>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport rainbowSDK from \"rainbow-web-sdk\";\r\n// import axios from \"axios\";\r\n\r\nexport default {\r\n    name: \"Call\",\r\n    components: {},\r\n    data: () => ({\r\n        start: false,\r\n        isConnecting: false,\r\n        cancelled: false,\r\n        call: \"\",\r\n        exit: false\r\n    }),\r\n    mounted() {\r\n        let self = this;\r\n        self.checkCall();\r\n        if (this.$store.state.agentId != \"\") {\r\n            self.isConnecting = true;\r\n            self.startCall();\r\n        } else {\r\n            console.log(\"agent id empty\");\r\n        }\r\n    },\r\n    methods: {\r\n        checkCall: function() {\r\n            if (rainbowSDK.webRTC.canMakeAudioVideoCall()) {\r\n                console.log(\"Browser supports calls\");\r\n            } else {\r\n                console.log(\"Browser does not support calls\");\r\n            }\r\n            if (rainbowSDK.webRTC.hasACamera()) {\r\n                console.log(\"Browser supports video\");\r\n            } else {\r\n                console.log(\"Browser does not support video\");\r\n            }\r\n            if (rainbowSDK.webRTC.hasAMicrophone()) {\r\n                console.log(\"Browser supports microphone\");\r\n            } else {\r\n                console.log(\"Browser does not support microphone\");\r\n            }\r\n            navigator.mediaDevices //authorise the application to access media device\r\n                .getUserMedia({ audio: true, video: false })\r\n                .then(function(stream) {\r\n                    stream.getTracks().forEach(function(track) {\r\n                        track.stop();\r\n                    });\r\n                    navigator.mediaDevices\r\n                        .enumerateDevices()\r\n                        .then(function(devices) {\r\n                            devices.forEach(function(device) {\r\n                                console.log(device);\r\n                                if (device.deviceId === \"default\") {\r\n                                    console.log(device);\r\n                                    console.log(device.label, \"is available\");\r\n                                    rainbowSDK.webRTC.useMicrophone(\"default\");\r\n                                    rainbowSDK.webRTC.useSpeaker(\"default\");\r\n                                }\r\n                            });\r\n                        })\r\n                        .catch(function(error) {\r\n                            console.log(error);\r\n                        });\r\n                })\r\n                .catch(function(error) {\r\n                    console.log(error);\r\n                });\r\n        },\r\n        startCall: async function() {\r\n            let self = this;\r\n            try {\r\n                console.log(this.$store.state.agentId);\r\n                let contact = await rainbowSDK.contacts.searchById(\r\n                    this.$store.state.agentId\r\n                );\r\n                console.log(contact);\r\n                let res = rainbowSDK.webRTC.callInAudio(contact);\r\n                if (res.label === \"OK\") {\r\n                    console.log(\"calling\");\r\n                }\r\n                document.addEventListener(\r\n                    rainbowSDK.webRTC.RAINBOW_ONWEBRTCERRORHANDLED,\r\n                    self.onWebRTCErrorHandled\r\n                );\r\n                document.addEventListener(\r\n                    rainbowSDK.webRTC.RAINBOW_ONWEBRTCCALLSTATECHANGED,\r\n                    self.onWebRTCCallChanged\r\n                );\r\n                self.start = true;\r\n            } catch (err) {\r\n                console.log(err);\r\n            }\r\n        },\r\n        onWebRTCCallChanged: function(event) {\r\n            let self = this;\r\n            self.call = event.detail;\r\n            console.log(\"OnWebRTCCallChanged event\", event.detail.status);\r\n            console.log(self.call.status.value);\r\n        }\r\n    },\r\n    onWebRTCErrorHandled: function(event) {\r\n        let errorSDK = event.detail;\r\n        console.log(\"WebRTC ERROR: \", errorSDK);\r\n    }\r\n    // endCall: async function() {\r\n    //   let self = this;\r\n    //   self.exit = true;\r\n    //   await rainbowSDK.webRTC.release(self.call);\r\n    //   console.log(\"Session Ended\");\r\n    // },\r\n    // moveToChat: async function() {\r\n    //   console.log(\"moving to chat\");\r\n    //   await rainbowSDK.webRTC.release(this.call);\r\n    //   await this.$router.push({ name: \"chatbot\" });\r\n    // }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.call {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 100vh;\r\n    text-align: center;\r\n    padding: 20px;\r\n}\r\n.box {\r\n    height: 100%;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    justify-items: center;\r\n    align-content: center;\r\n    overflow: auto;\r\n}\r\n.agent-text {\r\n    text-align: center;\r\n    position: absolute;\r\n    width: 100%;\r\n    margin-top: 150px;\r\n}\r\n.header {\r\n    background-color: #f1f1f1;\r\n    text-align: center;\r\n    font-size: 60px;\r\n    width: 100%;\r\n    transition: 0.2s;\r\n}\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n    transition: opacity 0.5s;\r\n}\r\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\r\n    opacity: 0;\r\n}\r\n</style>\r\n"]}]}
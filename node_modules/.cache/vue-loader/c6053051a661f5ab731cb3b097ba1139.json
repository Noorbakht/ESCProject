{"remainingRequest":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\src\\views\\Home.vue","mtime":1587211324671},{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\noorb\\OneDrive\\Desktop\\StarterKit-SDKWeb-VueJS-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByYWluYm93U0RLIGZyb20gInJhaW5ib3ctd2ViLXNkayI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAogIGNyZWF0ZWQoKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHJhaW5ib3dTREsuUkFJTkJPV19PTkxPQURFRCwgdGhpcy5vbkxvYWRlZCk7CiAgICByYWluYm93U0RLLnN0YXJ0KCk7CiAgICByYWluYm93U0RLLmxvYWQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uTG9hZGVkOiBmdW5jdGlvbigpIHsKICAgICAgLy9zZXQgYXBwIGlkCiAgICAgIHZhciBhcHBsaWNhdGlvbklEID0gImVjYjM1NDUwNWVmNzExZWE5YTZkY2YwMDRjZjhjMTRlIjsKICAgICAgLy9zZXQgYXBwIHNlY3JldAogICAgICB2YXIgYXBwbGljYXRpb25TZWNyZXQgPQogICAgICAgICI4cVhBQUFYU0tQTjJKaXJjaVp3cG9Ua2t6cUxYOEFXeDU1a2c1NVdSRlNtVkdySWZiMnhFbGVUZXV3cDQ0cVZCIjsKICAgICAgcmFpbmJvd1NESy5zZXRWZXJib3NlTG9nKGZhbHNlKTsKICAgICAgcmFpbmJvd1NESwogICAgICAgIC5pbml0aWFsaXplKGFwcGxpY2F0aW9uSUQsIGFwcGxpY2F0aW9uU2VjcmV0KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbREVNT10gOjogUmFpbmJvdyBTREsgaXMgaW5pdGlhbGl6ZWQhIik7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbREVNT10gOjogU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCB0aGUgU0RLLi4uIiwgZXJyKTsKICAgICAgICB9KTsKICAgICAgY29uc29sZS5sb2coIm9uTG9hZGVkKCkiKTsKICAgIH0sCiAgICBhdmFpbGFiaWxpdHk6IGFzeW5jIGZ1bmN0aW9uKGN1c3RvbWVySWQsIHNraWxsLCBjb250ZW50KSB7CiAgICAgIC8vIFNlbmQgY3VzdG9tZXIgYSBtZXNzYWdlIGluZGljYXRpbmcgdGhlIG51bWJlciBvZiBhZ2VudHMgYXZhaWxhYmxlCiAgICAgIGxldCBjdXN0b21lckNvbnRhY3QgPSBhd2FpdCBub2RlU0RLLmNvbnRhY3RzLmdldENvbnRhY3RCeUlkKAogICAgICAgIGN1c3RvbWVySWQsCiAgICAgICAgdHJ1ZQogICAgICApOwogICAgICBjb25zb2xlLmxvZygiR290IGN1c3RvbWVyIGNvbnRhY3QiKTsKICAgICAgbGV0IGNvbnZlcnNhdGlvbiA9IGF3YWl0IG5vZGVTREsuY29udmVyc2F0aW9ucy5vcGVuQ29udmVyc2F0aW9uRm9yQ29udGFjdCgKICAgICAgICBjdXN0b21lckNvbnRhY3QKICAgICAgKTsKICAgICAgY29uc29sZS5sb2coIkdvdCBjb252ZXJzYXRpb24iKTsKICAgICAgdmFyIHRvdGFsQ291bnQ7CiAgICAgIHZhciBhdmFpbGFibGVDb3VudDsKCiAgICAgIC8vIENvdW50IHRoZSBudW1iZXIgb2YgYXZhaWxhYmxlIGFnZW50cwogICAgICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgeyB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSwgYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgZXJyLAogICAgICAgIGNsaWVudAogICAgICApIHsKICAgICAgICBjb25zdCBjb2wgPSBjbGllbnQuZGIoZGJOYW1lKS5jb2xsZWN0aW9uKHNraWxsKTsKCiAgICAgICAgYXdhaXQgY29sLmNvdW50RG9jdW1lbnRzKGZ1bmN0aW9uKGVyciwgY291bnQpIHsKICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNb25nbyBUb3RhbCBDb3VudCBpczogIiArIGNvdW50KTsKICAgICAgICAgICAgdG90YWxDb3VudCA9IGNvdW50OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGF3YWl0IGNvbC5jb3VudERvY3VtZW50cyh7IHByZXNlbmNlOiAib25saW5lIiB9LCBmdW5jdGlvbihlcnIsIGNvdW50KSB7CiAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZygiTW9uZ28gQXZhaWxhYmxlIENvdW50IGlzOiAiICsgY291bnQpOwogICAgICAgICAgICBhdmFpbGFibGVDb3VudCA9IGNvdW50OwogICAgICAgICAgICBub2RlU0RLLmltLnNlbmRNZXNzYWdlVG9Db252ZXJzYXRpb24oCiAgICAgICAgICAgICAgY29udmVyc2F0aW9uLAogICAgICAgICAgICAgIGBUaGVyZSBhcmUgJHthdmFpbGFibGVDb3VudH0vJHt0b3RhbENvdW50fSBhZ2VudHMgYXZhaWxhYmxlIGluIHRoZSAke2NvbnRlbnR9IGNhdGVnb3J5YAogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container fluid class=\"pa-0\">\n    <div class=\"text-center\">\n      <header class=\"header\">\n        <h1 class=\"display-4\">Customer Support Page</h1>\n      </header>\n      <v-btn width=\"100%\" height=\"180\" x-large color=\"#B0BEC5\" dark :to=\"{ name: 'guest' }\">\n        <span>\n          <h2>Use Guest Account</h2>\n        </span>\n      </v-btn>\n    </div>\n  </v-container>\n</template>\n\n<script>\nimport rainbowSDK from \"rainbow-web-sdk\";\n\nexport default {\n  name: \"Home\",\n  created() {\n    document.addEventListener(rainbowSDK.RAINBOW_ONLOADED, this.onLoaded);\n    rainbowSDK.start();\n    rainbowSDK.load();\n  },\n  methods: {\n    onLoaded: function() {\n      //set app id\n      var applicationID = \"ecb354505ef711ea9a6dcf004cf8c14e\";\n      //set app secret\n      var applicationSecret =\n        \"8qXAAAXSKPN2JirciZwpoTkkzqLX8AWx55kg55WRFSmVGrIfb2xEleTeuwp44qVB\";\n      rainbowSDK.setVerboseLog(false);\n      rainbowSDK\n        .initialize(applicationID, applicationSecret)\n        .then(() => {\n          console.log(\"[DEMO] :: Rainbow SDK is initialized!\");\n        })\n        .catch(err => {\n          console.log(\"[DEMO] :: Something went wrong with the SDK...\", err);\n        });\n      console.log(\"onLoaded()\");\n    },\n    availability: async function(customerId, skill, content) {\n      // Send customer a message indicating the number of agents available\n      let customerContact = await nodeSDK.contacts.getContactById(\n        customerId,\n        true\n      );\n      console.log(\"Got customer contact\");\n      let conversation = await nodeSDK.conversations.openConversationForContact(\n        customerContact\n      );\n      console.log(\"Got conversation\");\n      var totalCount;\n      var availableCount;\n\n      // Count the number of available agents\n      MongoClient.connect(url, { useUnifiedTopology: true }, async function(\n        err,\n        client\n      ) {\n        const col = client.db(dbName).collection(skill);\n\n        await col.countDocuments(function(err, count) {\n          if (!err) {\n            console.log(\"Mongo Total Count is: \" + count);\n            totalCount = count;\n          }\n        });\n        await col.countDocuments({ presence: \"online\" }, function(err, count) {\n          if (!err) {\n            console.log(\"Mongo Available Count is: \" + count);\n            availableCount = count;\n            nodeSDK.im.sendMessageToConversation(\n              conversation,\n              `There are ${availableCount}/${totalCount} agents available in the ${content} category`\n            );\n          }\n        });\n      });\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n  text-decoration: none;\n}\nli a {\n  text-decoration: none;\n}\n.header {\n  background-image: url(\"../assets/bank.jpg\");\n  color: #fff;\n  text-align: center;\n  padding: 270px;\n}\n\n.header a {\n  color: #fff;\n  padding-right: 5px;\n  text-decoration: none;\n}\n</style>\n"]}]}